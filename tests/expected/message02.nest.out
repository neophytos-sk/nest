<lang x-nsp="::nest::lang">
    <decl x-name="base_type" x-tag="meta" x-id="base_type"/>
    <decl x-name="varchar" x-tag="base_type" x-id="varchar"/>
    <decl x-name="bool" x-tag="base_type" x-id="bool"/>
    <decl x-name="varint" x-tag="base_type" x-id="varint"/>
    <decl x-name="byte" x-tag="base_type" x-id="byte"/>
    <decl x-name="int16" x-tag="base_type" x-id="int16"/>
    <decl x-name="int32" x-tag="base_type" x-id="int32"/>
    <decl x-name="int64" x-tag="base_type" x-id="int64"/>
    <decl x-name="double" x-tag="base_type" x-id="double"/>
    <decl x-name="date" x-tag="base_type" x-id="date"/>
    <decl x-name="struct" x-tag="meta" x-id="struct">
        <decl x-name="id" x-tag="varchar"/>
        <decl x-name="name" x-tag="varchar"/>
        <decl x-name="type" x-tag="varchar"/>
        <decl x-name="nsp" x-tag="varchar"/>
        <decl x-name="default_value" x-tag="varchar" x-default_value=""/>
        <decl x-name="slot" x-tag="struct" x-id="struct.slot" x-default_value="" x-container="multiple">
            <decl x-name="id" x-tag="varchar"/>
            <decl x-name="name" x-tag="varchar"/>
            <decl x-name="type" x-tag="varchar"/>
            <decl x-name="default_value" x-tag="varchar" x-default_value=""/>
            <decl x-name="optional_p" x-tag="bool" x-default_value="false"/>
            <decl x-name="container" x-tag="varchar" x-default_value=""/>
        </decl>
        <decl x-name="pk" x-tag="varchar"/>
        <decl x-name="is_final_if_no_scope" x-tag="bool"/>
    </decl>
    <decl x-name="fun" x-tag="struct" x-id="fun">
        <decl x-name="name" x-tag="varchar"/>
        <decl x-name="param" x-tag="varchar" x-default_value="" x-container="multiple"/>
        <decl x-name="body" x-tag="varchar"/>
    </decl>
    <decl x-name="proxy" x-tag="struct" x-id="proxy">
        <decl x-name="target" x-tag="varchar"/>
        <decl x-name="name" x-tag="varchar"/>
    </decl>
</lang>

<nest>
    <decl x-name="email" x-tag="struct" x-id="email">
        <decl x-name="name" x-tag="varchar" x-default_value=""/>
        <decl x-name="address" x-tag="varchar"/>
    </decl>
    <decl x-name="message" x-tag="struct" x-id="message">
        <decl x-name="subject" x-tag="varchar"/>
        <decl x-name="body" x-tag="varchar" x-default_value="" x-optional_p="true"/>
        <decl x-name="from" x-tag="email" x-id="message.from"/>
        <decl x-name="to" x-tag="email" x-id="message.to" x-container="multiple"/>
        <decl x-name="cc" x-tag="email" x-id="message.cc" x-container="multiple"/>
        <decl x-name="bcc" x-tag="email" x-id="message.bcc" x-container="multiple"/>
        <decl x-name="wordcount" x-tag="pair" x-id="message.wordcount" x-container="multiple">
            <decl x-name="first" x-tag="varchar"/>
            <decl x-name="second" x-tag="varint"/>
        </decl>
        <decl x-name="tag" x-tag="varchar" x-container="multiple" x-optional_p="true"/>
    </decl>
    <inst x-name="msg1" x-tag="message" x-id="msg1">
        <inst x-name="message.subject" x-tag="varchar">hello world</inst>
        <inst x-name="message.body" x-tag="varchar">this is a test</inst>
        <inst x-name="message.from" x-tag="email">
            <inst x-name="email.name" x-tag="varchar">Zena Wow</inst>
            <inst x-name="email.address" x-tag="varchar">zena@example.com</inst>
        </inst>
        <inst x-name="message.to" x-tag="email">
            <inst x-name="email.name" x-tag="varchar">Jane Awesome</inst>
            <inst x-name="email.address" x-tag="varchar">jane@example.com</inst>
        </inst>
        <inst x-name="message.bcc" x-tag="email" x-container="multiple">
            <inst x-name="email.name" x-tag="varchar">Someone Great</inst>
            <inst x-name="email.address" x-tag="varchar">someone@example.com</inst>
        </inst>
        <inst x-name="message.bcc" x-tag="email" x-container="multiple">
            <inst x-name="email.name" x-tag="varchar">Vera Cool</inst>
            <inst x-name="email.address" x-tag="varchar">vera@example.com</inst>
        </inst>
        <inst x-name="message.bcc" x-tag="email" x-container="multiple">
            <inst x-name="email.name" x-tag="varchar">Paris Love</inst>
            <inst x-name="email.address" x-tag="varchar">paris@example.com</inst>
        </inst>
        <inst x-name="message.wordcount" x-tag="pair" x-container="multiple">
            <inst x-name="message.wordcount.first" x-tag="varchar">hello</inst>
            <inst x-name="message.wordcount.second" x-tag="varint">123</inst>
        </inst>
        <inst x-name="message.wordcount" x-tag="pair" x-container="multiple">
            <inst x-name="message.wordcount.first" x-tag="varchar">world</inst>
            <inst x-name="message.wordcount.second" x-tag="varint">45</inst>
        </inst>
        <inst x-name="message.wordcount" x-tag="pair" x-container="multiple">
            <inst x-name="message.wordcount.first" x-tag="varchar">test</inst>
            <inst x-name="message.wordcount.second" x-tag="varint">789</inst>
        </inst>
        <inst x-name="message.wordcount" x-tag="pair" x-container="multiple">
            <inst x-name="message.wordcount.first" x-tag="varchar">this</inst>
            <inst x-name="message.wordcount.second" x-tag="varint">1</inst>
        </inst>
        <inst x-name="message.tag" x-tag="varchar">sports</inst>
        <inst x-name="message.tag" x-tag="varchar">entertainment</inst>
    </inst>
</nest>

